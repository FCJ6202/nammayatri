imports:
  UTCTime: Kernel.Prelude
  ShortId: Kernel.Types.Id
  Merchant: Domain.Types.Merchant
  HighPrecMoney: Kernel.Types.Common
  PayoutOrderStatus : Kernel.External.Payment.Juspay.Types.Payout
  AccountDetailsType : Kernel.External.Payment.Juspay.Types.Payout

PayoutOrders:
  tableName: payout_orders
  fields:
    id : Id PayoutOrders
    customerId : Text
    orderId : Text
    merchantId : Text
    city : Text
    amount : HighPrecMoney
    status : PayoutOrderStatus
    accountDetailsType : Maybe Text # add instance of AccountDetailsType in kernel
    entityId : Maybe Text
    entityName : Maybe EntityName
    vpa : Maybe Text
    mobileNo : Text
    customerEmail : Text
    createdAt : UTCTime
    updatedAt : UTCTime
  sqlType:
    id: character varying(36)
    amount: double precision
    createdAt: timestamp with time zone
    updatedAt: timestamp with time zone
  constraints:
    id: PrimaryKey
    orderId: PrimaryKey
  queries:
    findById:
      kvFunction: findOneWithKV
      where: id
    findByOrderId:
      kvFunction: findOneWithKV
      where: orderId
    updatePayoutOrderStatus:
      kvFunction: updateWithKV
      params: status
      where: orderId
  defaultQueryTypeConstraint: "(Lib.Payment.Storage.Beam.BeamFlow.BeamFlow m r)"
  beamInstance: MakeTableInstancesGenericSchema
  types :
    EntityName:
      enum: "MANUAL, DRIVER_DAILY_STATS"

PayoutTransactions:
  tableName: payout_transactions
  fields:
    id : Id PayoutTransactions
    payoutOrderId : Id PayoutOrders
    transactionRef : Text
    gateWayRefId : Text
    fulfillmentMethod : Maybe Text
    amount : HighPrecMoney
    status : Text
    createdAt : UTCTime
    updatedAt : UTCTime
  sqlType:
    id: character varying(36)
    amount: double precision
    createdAt: timestamp with time zone
    updatedAt: timestamp with time zone
  constraints:
    id: PrimaryKey
    transactionRef: PrimaryKey
  queries:
    findById:
      kvFunction: findOneWithKV
      where: id
    findByTransactionRef:
      kvFunction: findOneWithKV
      where: transactionRef
    updatePayoutTransactionStatus:
      kvFunction: updateWithKV
      params: status
      where: transactionRef
  defaultQueryTypeConstraint: "(Lib.Payment.Storage.Beam.BeamFlow.BeamFlow m r)"
  beamInstance: MakeTableInstancesGenericSchema
