imports:
  Journey: Domain.Types.Journey
  SearchRequest: Domain.Types.SearchRequest
  Estimate: Domain.Types.Estimate
  LocationAddress: Domain.Types.LocationAddress
  PriceAPIEntity : Kernel.Types.Common
  FRFSStationAPI : API.Types.UI.FRFSTicketService
  TravelMode : Domain.Types.Trip
  Location : Domain.Types.Location

module: MultimodalConfirm

types:
  JourneyInfoReq:
    legsReq: [JourneyLegsReq]
  JourneyLegsReq:
    legNumber: Int
    originAddress: LocationAddress
    destinationAddress: LocationAddress
  JourneyInfoResp:
    estimatedDuration: Seconds
    estimatedFare: PriceAPIEntity
    estimatedDistance: Distance
    legs: [JourneyLegResp]
  JourneyLegResp:
    legNumber: Int
    legId: Text # searchRequestId or frfsSearchRequestId or walkLegId
    estimatedDuration: Seconds
    estimatedFare: PriceAPIEntity
    estimatedDistance: Distance
    travelMode: TravelMode
    journeyLegInfo: JourneyLegInfo

  JourneyLegInfo:
    enum: "Walk JourneyLegWalkInfo, Taxi JourneyLegTaxiInfo, Bus JourneyLegBusInfo, Metro JourneyLegMetroInfo"
  JourneyLegWalkInfo:
    origin: Location
    destination: Location

  JourneyLegTaxiInfo:
    origin: Location
    stops: [Location]
    providerName: Text
    providerLogo: Maybe Text

  JourneyLegMetroInfo:
    originStop: FRFSStationAPI
    destinationStop: FRFSStationAPI
    lineColor: Text
    frequency: Seconds

  JourneyLegBusInfo:
    originStation: FRFSStationAPI
    destinationStation: FRFSStationAPI
    busCategory: Text
    routeNumber: Text
    frequency: Maybe Seconds
    startTime: Maybe TimeOfDay

apis:
  - POST:
      endpoint: /multimodal/{journeyId}/info
      params:
        journeyId: Id Journey
      request:
        type: JourneyInfoReq
      response:
        type: JourneyInfoResp
  - POST:
      endpoint: /multimodal/{journeyId}/confirm
      params:
        journeyId: Id Journey
      response:
        type: Kernel.Types.APISuccess.APISuccess
  - GET:
      endpoint: /multimodal/{journeyId}/booking/info
      params:
        journeyId: Id Journey
      response:
        type: JourneyInfoResp

  - POST:
      endpoint: /multimodal/{searchRequestId}/switch/{estimateId}
      params:
        searchRequestId: Id SearchRequest
        estimateId: Id Estimate
      response:
        type: Kernel.Types.APISuccess.APISuccess

  - POST:
      endpoint: /multimodal/{legId}/switchToAuto
      params:
        legId: Text
      response:
        type: Kernel.Types.APISuccess.APISuccess